<% provide(:title, "Kategorienliste") %>

<%= render "admin/action_menu" %>

<div>
  <h2>Kategorienliste</h2>

  <%=link_to "Neue Kategorie anlegen", new_category_path %> |
  <%=link_to "Kategorien mit möglicherweise fehlenden Verknüpfungen anzeigen", suspicious_associations_path %>

  <table id="index" class="tablesorter">
    <thead>
      <tr><th>Ident<br/>Title<br/>Wurzel?</th><th>Antworten, die auf sie zeigen</th><th>Verknüpfte Fragen</th><th>Aktionen</th></tr>
    </thead>
    <tbody>
      <% @categories.each do |c| %>
        <tr>
          <td>
            <%= link_to(c.ident, c, :class => c.released? ? "" : "strike") %><br/>
            <%= c.title %><br/>
            √<%= c.is_root? %><br/>
          </td>
          <td>
            <% c.answers.each do |a| %>
              <%=link_to a.ident, [a.question, a] %>
            <% end %>
          </td>
          <td>
            <% c.questions.each do |q| %>
              <%=link_to q.ident, q, :class => q.complete? ? "" : "strike" %>
            <% end %>
          </td>
          <td>
            <%= link_to "Anzeigen", category_path(c) %><br/>
            <%= link_to "Bearbeiten", edit_category_path(c) %><br/>
            <%= link_to "Neue Frage", new_question_path(:parent => "Category_#{c.id}") %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
